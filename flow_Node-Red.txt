[{"id":"e09e4458.492d38","type":"http in","z":"ac65deec.0ec91","name":"Chatbot online- Agente Cognitivo de Segurança","url":"/asiagentecognitivo","method":"get","upload":false,"swaggerDoc":"","x":363.00000762939453,"y":294.0000057220459,"wires":[["85e78520.9c5f58"]]},{"id":"85e78520.9c5f58","type":"template","z":"ac65deec.0ec91","name":"Conversation BOT Template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>\n\t  Agente Virtual - Agente Cognitivo de Segurança\n\t</title>\n\t<link rel=\"stylesheet\"\n        type=\"text/css\"\n        href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" />\n  </head>\n  <body>\n\n    <div class=\"container-fluid\">\n      <div id=\"no-script\"class=\"bg-info\">\n        This application needs JavaScript enabled in your browser!\n      </div>\n      <div id=\"id_contextdump\"></div>\n\n      <h1>Agente Cognitivo de Segurança</h1>\n\t  <div class=\"alert alert-success\" role=\"alert\" id=id_botchathistory></div>\n\t  \n\t  <div>\n\t      <form>\n\t          <div class=\"form-group\">\n                    \n                    <label for=\"id_chattext\" class=\"col-sm-2 col-form-label\">Você: </label>\n                    <div class=\"col-sm-10\">\n                        <input type=\"text\" name=\"chattext\" id=\"id_chattext\">\n                    </div>\n                    \n                    <br/><br/>\n\t              \n\t          </div>\n\n\t      </form>\n\t      <button type=\"button\" class=\"btn btn-primary\" onclick=\"javascript:onChatClick()\">Enviar</button>\n\t  </div>\n    </div>\n    <script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-2.1.4.min.js\"></script>\n    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"></script>\n\n    <script type=\"text/javascript\">\n    \n      $(document).ready(function() {\n          javascriptCheck();\n          \t$('#id_contextdump').hide();\n      });\n\n      // if javascript is enabled on the browser then can\n      // remove the warning message\n      function javascriptCheck() {\n        $('#no-script').remove();\n      }\n      \n      function createNewDiv(who, message) {\n        console.log('002-001');  \n        var txt = who + ' : ' + message;\n        return $('<div></div>').text(txt);\n      }\n\n      function chat(person, txt) {\n        $('#id_botchathistory').append(createNewDiv(person, txt));\n      }    \n      \n      function processOK(response) {\n        console.log('003-001');\n        console.log(response);\n        console.log(response.botresponse.messageout);\n        console.log(response.botresponse.messageout.output.text);\n        console.log(response.botresponse.messageout.context);\n        chat('Agente Virtual', response.botresponse.messageout.output.text); \n        $('#id_contextdump').data('convContext', response.botresponse.messageout.context);\n      }\n      \n      function processNotOK() {\n        chat('Error', 'Error whilst attempting to talk to Bot');\n      }\n      \n      function invokeAjax(message) {\n        var contextdata = $('#id_contextdump').data('convContext');\n        console.log('checking stashed context data');\n        console.log(contextdata);\n        \n  \n        //var ajaxData = \"msgdata=\" + message;\n        var ajaxData = {};\n        ajaxData.msgdata = message;\n        if (contextdata) {\n          ajaxData.context = contextdata;    \n        }\n\n        $.ajax({\n          type: 'POST',\n          url: 'asichatagentecognitivo',\n          data: ajaxData,\n          success: processOK,\n          error: processNotOK\n        });\n      }\n          \n      // User has entered some text.\n      function onChatClick() {\n        console.log('001-001');\n        var txt = $('#id_chattext').val();\n        chat('Você', txt); \n        invokeAjax(txt);\n        console.log('001-002');\n      }\n      \n        \n    </script>\n  </body>\n</html>\n","x":748,"y":312,"wires":[["f3e22d5.3100dd"]]},{"id":"f3e22d5.3100dd","type":"http response","z":"ac65deec.0ec91","name":"","x":1138,"y":312,"wires":[]},{"id":"2d323d79.8f8fd2","type":"http in","z":"ac65deec.0ec91","name":"Aplicativo - Agente Cognitivo de Segurança","url":"/asichatagentecognitivo","method":"post","upload":false,"swaggerDoc":"","x":264.00001525878906,"y":370.523473739624,"wires":[["16856e4b.f1d082"]]},{"id":"bdfaa94d.426088","type":"http response","z":"ac65deec.0ec91","name":"","x":1138,"y":372,"wires":[]},{"id":"16856e4b.f1d082","type":"function","z":"ac65deec.0ec91","name":"Pre Service Processing","func":"flow.set(\"RespostaAssistente\",\"Ok, variavel utilizada\");\n\n// stash away incoming data\nmsg.mydata = {};\nmsg.mydata.messagein = msg.req.body.msgdata;\nmsg.payload = msg.mydata.messagein;\n\nmsg.params = { \"context\": msg.req.body.context};\n\nreturn msg;","outputs":1,"noerr":0,"x":638,"y":372,"wires":[["59596cfd.c0e714"]]},{"id":"eb39b515.332da8","type":"function","z":"ac65deec.0ec91","name":"Post Service Processing","func":"//Resposta = \"Ok, executado\";\n//Resposta = flow.get(\"RespostaAssistente\");\n\nmsg.mydata.messageout = msg.payload;\n\n//msg.mydata.messageout.output.text = Resposta;\n\nmsg.payload = {};\nmsg.payload.botresponse = msg.mydata;\n\nreturn msg;","outputs":1,"noerr":0,"x":918,"y":372,"wires":[["bdfaa94d.426088"]]},{"id":"72fc1a04.8c2944","type":"ui_form","z":"ac65deec.0ec91","name":"","label":"","group":"abaac7d2.4e6c58","order":1,"width":"0","height":"0","options":[{"label":"O que gostaria de fazer ?","value":"pergunta","type":"text","required":false}],"formValue":{"pergunta":""},"payload":"","topic":"pergunta","x":252,"y":459.3334484100342,"wires":[["c2371d2c.7555f"]]},{"id":"c2371d2c.7555f","type":"function","z":"ac65deec.0ec91","name":"Trata campos do formulário","func":"msg.user = msg.payload.usuario;\nmsg.payload = msg.payload.pergunta;\nreturn msg;","outputs":1,"noerr":0,"x":369.50001525878906,"y":535.3333911895752,"wires":[["59596cfd.c0e714"]]},{"id":"419a3218.1480ec","type":"function","z":"ac65deec.0ec91","name":"InformaAlerta do App","func":"if (msg.verifica == \"AvaliacaoDeSeguranca\"){\n    msg.payload = 5;\n    msg.topic = \"Alto\";\n}else{\n    msg.payload = 2;\n    msg.topic = \"Baixo\";\n\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":1072.3812713623047,"y":566.9608135223389,"wires":[["4ba4791.5c1d888"]]},{"id":"65115e33.fe715","type":"ui_text","z":"ac65deec.0ec91","group":"abaac7d2.4e6c58","order":2,"width":0,"height":0,"name":"Mensagem","label":"Mensagem","format":"{{msg.payload}}","layout":"row-center","x":1281.3812103271484,"y":638.9608173370361,"wires":[]},{"id":"7a4f97b9.e865b8","type":"function","z":"ac65deec.0ec91","name":"Exibe Imagem","func":"if (msg.verifica == \"piadas\"){\n    msg.payload = \"data:image/jpeg;base64,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\";\n}\n\nif (msg.verifica == \"AvaliacaoDeSeguranca\"){\n    msg.payload = \"https://www.ibm.com/cloud-computing/social/images/scsb-security-lead.png\";\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1040.3810272216797,"y":733.960901260376,"wires":[["a10c2ce3.1fd01"]]},{"id":"c19ca2b0.8c735","type":"function","z":"ac65deec.0ec91","name":"InformaTexto","func":"//var texto = msg.payload.output.text;\n\nif (msg.verifica == \"AvaliacaoDeSeguranca\"){\n    msg.payload = texto = \"Ok, chamei o time de segurança.\";\n}else{\n    msg.payload = texto = \"Hora da diverção.\";\n}\n\n//msg.payload = texto;\n\nreturn msg;","outputs":1,"noerr":0,"x":1043.3811111450195,"y":653.9608173370361,"wires":[["65115e33.fe715","f6784999.3edc18","52e068a6.902b28"]]},{"id":"f6784999.3edc18","type":"ui_audio","z":"ac65deec.0ec91","name":"","group":"abaac7d2.4e6c58","voice":"16","always":true,"x":1270.3812522888184,"y":702.9608879089355,"wires":[]},{"id":"a10c2ce3.1fd01","type":"ui_template","z":"ac65deec.0ec91","group":"abaac7d2.4e6c58","name":"","order":3,"width":"12","height":"6","format":"            <div ng-show=\"!setMedia[$index]\" class=\"col-xs-12 col-sm-12 col-md-5\">\n                <img ng-src=\"{{msg.payload}}\" width=\"500px\">\n            </div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1279.8890228271484,"y":755.4842615127563,"wires":[[]]},{"id":"4a370f4d.0b9f4","type":"function","z":"ac65deec.0ec91","name":"Avalia o incidente","func":"msg.payload = msg.payload;\n//msg.verifica = \"\";\n//msg.maturidade = \"\";\n\nif ( msg.payload.intents != 0 &&  msg.payload.intents.length >0 ){\n    var intents = msg.payload.intents;\n    \n    for(var intent of intents){\n        if(intent.intent == \"piadas\"){\n            msg.verifica = \"piadas\";\n        }\n        if(intent.intent == \"AvaliacaoDeSeguranca\"){\n            msg.verifica = \"AvaliacaoDeSeguranca\";\n        }        \n        \n    }\n    \n}\n\nif ( msg.payload.entities != 0 &&  msg.payload.entities.length >0 ){\n    var entities = msg.payload.entities;\n    \n    for(var entity of entities ){\n \n        if(entity.entity == \"piadas\"){\n            msg.verifica = \"piadas\";\n        }\n        \n        if(entity.entity == \"AvaliacaoDeSeguranca\"){\n            msg.verifica = \"AvaliacaoDeSeguranca\";\n        }        \n           \n    }\n\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"x":575.0000457763672,"y":640.4372100830078,"wires":[["10556f6a.c4b6b1"]]},{"id":"4ba4791.5c1d888","type":"ui_gauge","z":"ac65deec.0ec91","name":"","group":"abaac7d2.4e6c58","order":4,"width":0,"height":0,"gtype":"gage","title":"Medidor de importância","label":"%","format":"{{value}}","min":0,"max":"5","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1334.8334197998047,"y":562.6276245117188,"wires":[]},{"id":"52e068a6.902b28","type":"debug","z":"ac65deec.0ec91","name":"","active":true,"console":"false","complete":"payload","x":1271.0188751220703,"y":828.0251483917236,"wires":[]},{"id":"10556f6a.c4b6b1","type":"switch","z":"ac65deec.0ec91","name":"Separa Assuntos","property":"verifica","propertyType":"msg","rules":[{"t":"cont","v":"piadas","vt":"str"},{"t":"cont","v":"AvaliacaoDeSeguranca","vt":"str"},{"t":"else"}],"checkall":"true","outputs":3,"x":789.0234985351562,"y":661.0352468490601,"wires":[["419a3218.1480ec","c19ca2b0.8c735","7a4f97b9.e865b8"],["419a3218.1480ec","c19ca2b0.8c735","7a4f97b9.e865b8"],[]]},{"id":"59596cfd.c0e714","type":"watson-conversation-v1","z":"ac65deec.0ec91","name":"Watson Assistant","workspaceid":"","multiuser":false,"context":false,"empty-payload":false,"default-endpoint":false,"service-endpoint":"","x":643.0000305175781,"y":488.52344608306885,"wires":[["eb39b515.332da8","4a370f4d.0b9f4"]]},{"id":"abaac7d2.4e6c58","type":"ui_group","z":"","name":"Agente Cognitivo de Segurança","tab":"c7d07c7c.f8d1e","disp":true,"width":"12","collapse":false},{"id":"c7d07c7c.f8d1e","type":"ui_tab","z":"","name":"agentecognitivo","icon":"dashboard"}]